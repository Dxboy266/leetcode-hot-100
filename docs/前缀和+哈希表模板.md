# å‰ç¼€å’Œ + å“ˆå¸Œè¡¨ æ¨¡æ¿

## ğŸ“– æ ¸å¿ƒæ€æƒ³

å‰ç¼€å’Œ + å“ˆå¸Œè¡¨æ˜¯è§£å†³**å­æ•°ç»„å’Œé—®é¢˜**çš„ç»å…¸æ¨¡æ¿ï¼Œå¯ä»¥å°† O(nÂ²) çš„æš´åŠ›è§£æ³•ä¼˜åŒ–åˆ° O(n)ã€‚

## ğŸ”‘ æ ¸å¿ƒå…¬å¼

```
å­æ•°ç»„å’Œï¼šsum[i,j] = prefixSum[j] - prefixSum[i-1]
å¦‚æœ sum[i,j] = kï¼Œåˆ™ï¼šprefixSum[i-1] = prefixSum[j] - k
```

## ğŸ“ æ ‡å‡†æ¨¡æ¿

```java
public int subarraySum(int[] nums, int k) {
    int count = 0;
    int prefixSum = 0;  // å½“å‰å‰ç¼€å’Œ
    Map<Integer, Integer> countMap = new HashMap<>();
    
    // å…³é”®ï¼šåˆå§‹åŒ– prefixSum[0] = 0ï¼Œå‡ºç°æ¬¡æ•°ä¸º1
    countMap.put(0, 1);
    
    for (int num : nums) {
        // 1. è®¡ç®—å½“å‰å‰ç¼€å’Œ
        prefixSum += num;
        
        // 2. æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ prefixSum - k çš„å‰ç¼€å’Œ
        if (countMap.containsKey(prefixSum - k)) {
            count += countMap.get(prefixSum - k);
        }
        
        // 3. å°†å½“å‰å‰ç¼€å’ŒåŠ å…¥HashMap
        countMap.put(prefixSum, countMap.getOrDefault(prefixSum, 0) + 1);
    }
    
    return count;
}
```

## ğŸ¯ é€‚ç”¨åœºæ™¯

1. **å­æ•°ç»„å’Œç­‰äºç›®æ ‡å€¼**ï¼šLeetCode 560
2. **å­æ•°ç»„å’Œèƒ½è¢«Kæ•´é™¤**ï¼šLeetCode 974
3. **è¿ç»­å­æ•°ç»„å’Œ**ï¼šLeetCode 523
4. **å’Œä¸ºSçš„è¿ç»­æ­£æ•°åºåˆ—**ï¼šå‰‘æŒ‡Offer 57-II

## ğŸ’¡ å…³é”®ç‚¹

### 1. åˆå§‹åŒ–
```java
countMap.put(0, 1);  // å¤„ç†ä»ç´¢å¼•0å¼€å§‹çš„å­æ•°ç»„
```

### 2. æŸ¥æ‰¾é¡ºåº
```java
// å…ˆæŸ¥æ‰¾ï¼Œå†æ›´æ–°
if (countMap.containsKey(prefixSum - k)) {
    count += countMap.get(prefixSum - k);
}
countMap.put(prefixSum, countMap.getOrDefault(prefixSum, 0) + 1);
```

### 3. ä¸ºä»€ä¹ˆå…ˆæŸ¥æ‰¾å†æ›´æ–°ï¼Ÿ
- é¿å…å°†å½“å‰å…ƒç´ è‡ªå·±ç®—ä½œå­æ•°ç»„
- ç¡®ä¿æŸ¥æ‰¾çš„æ˜¯**ä¹‹å‰**å‡ºç°çš„å‰ç¼€å’Œ

## ğŸ” ç®—æ³•åˆ†æ

| æ–¹é¢ | å¤æ‚åº¦ | è¯´æ˜ |
|------|--------|------|
| æ—¶é—´å¤æ‚åº¦ | O(n) | åªéœ€éå†ä¸€æ¬¡æ•°ç»„ |
| ç©ºé—´å¤æ‚åº¦ | O(n) | HashMapå­˜å‚¨å‰ç¼€å’Œ |
| æŸ¥æ‰¾æ•ˆç‡ | O(1) | HashMapæŸ¥æ‰¾ |

## ğŸ“š ç›¸å…³é¢˜ç›®

### åŸºç¡€é¢˜
- [560. å’Œä¸ºKçš„å­æ•°ç»„](https://leetcode.cn/problems/subarray-sum-equals-k/)
- [1. ä¸¤æ•°ä¹‹å’Œ](https://leetcode.cn/problems/two-sum/)

### è¿›é˜¶é¢˜
- [974. å’Œå¯è¢«Kæ•´é™¤çš„å­æ•°ç»„](https://leetcode.cn/problems/subarray-sums-divisible-by-k/)
- [523. è¿ç»­çš„å­æ•°ç»„å’Œ](https://leetcode.cn/problems/continuous-subarray-sum/)
- [930. å’Œç›¸åŒçš„äºŒå…ƒå­æ•°ç»„](https://leetcode.cn/problems/binary-subarrays-with-sum/)

## âš ï¸ æ˜“é”™ç‚¹

1. **å¿˜è®°åˆå§‹åŒ–**ï¼š`countMap.put(0, 1)`
2. **æŸ¥æ‰¾é¡ºåºé”™è¯¯**ï¼šåº”è¯¥å…ˆæŸ¥æ‰¾å†æ›´æ–°
3. **ç†è§£å­æ•°ç»„**ï¼šå¿…é¡»æ˜¯è¿ç»­çš„ï¼Œä¸æ˜¯å­åºåˆ—
4. **è´Ÿæ•°å¤„ç†**ï¼šæ•°ç»„å…ƒç´ å¯èƒ½ä¸ºè´Ÿæ•°ï¼Œå‰ç¼€å’Œå¯èƒ½é‡å¤

## ğŸš€ ä¼˜åŒ–æŠ€å·§

1. **ç©ºé—´ä¼˜åŒ–**ï¼šä¸éœ€è¦å­˜å‚¨å®Œæ•´çš„å‰ç¼€å’Œæ•°ç»„ï¼Œåªéœ€å½“å‰å‰ç¼€å’Œ
2. **è¾¹ç•Œå¤„ç†**ï¼šè€ƒè™‘ç©ºæ•°ç»„ã€å•å…ƒç´ ç­‰è¾¹ç•Œæƒ…å†µ
3. **é‡å¤å‰ç¼€å’Œ**ï¼šç”¨HashMapè®°å½•å‡ºç°æ¬¡æ•°ï¼Œè€Œä¸æ˜¯ç®€å•çš„å­˜åœ¨æ€§

---

**æ€»ç»“**ï¼šå‰ç¼€å’Œ+å“ˆå¸Œè¡¨æ¨¡æ¿æ˜¯è§£å†³å­æ•°ç»„å’Œé—®é¢˜çš„åˆ©å™¨ï¼ŒæŒæ¡è¿™ä¸ªæ¨¡æ¿å¯ä»¥è½»æ¾è§£å†³ä¸€å¤§ç±»ç›¸å…³é—®é¢˜ï¼

